import cv2
import numpy as np
from matplotlib import pyplot as plt

img = cv2.imread('Sp_D_CNN_A_art0024_ani0032_0268.jpg')

filter1 = np.array([[0, 0, 0, 0, 0],
           [0, -1, 2, -1, 0],
           [0, 2, -4, 2, 0],
           [0, -1, 2, -1, 0],
           [0, 0, 0, 0, 0]], np.float32)/4.0
filter2 = np.array([[-1, 2, -2, 2, -1],
           [2, -6, 8, -6, 2],
           [-2, 8, -12, 8, -2],
           [2, -6, 8, -6, 2],
           [-1, 2, -2, 2, -1]], np.float32)/12.0
filter3 = np.array([[0, 0, 0, 0, 0],
           [0, 0, 0, 0, 0],
           [0, 1, -2, 1, 0],
           [0, 0, 0, 0, 0],
           [0, 0, 0, 0, 0]], np.float32)/2.0

filter3 = np.array([ 0.        , -0.08333333,  0.        ,  0.        , -0.08333333,  0.        ,  0.,
 -0.08333333,  0.        ,  0.        ,  0.16666667,  0.        ,  0.,
  0.16666667,  0.        ,  0.        ,  0.16666667,  0.        ,  0.,
 -0.16666667,  0.        ,  0.        , -0.16666667,  0.        ,  0.,
 -0.16666667,  0.        ,  0.        ,  0.16666667,  0.        ,  0.,
  0.16666667,  0.        ,  0.        ,  0.16666667,  0.        ,  0.,
 -0.08333333,  0.        ,  0.        , -0.08333333,  0.        ,  0.,
 -0.08333333,  0.        ,  0.        ,  0.16666667,  0.        ,  0.,
  0.16666667,  0.        ,  0.        ,  0.16666667,  0.        , -0.25      , -0.5,
  0.        , -0.25      , -0.5       ,  0.        , -0.25      , -0.5       ,  0.,
  0.5       ,  0.66666667,  0.        ,  0.5       ,  0.66666667,  0.        ,  0.5,
  0.66666667,  0.        , -0.25      , -0.5       ,  0.        , -0.25      , -0.5,
  0.        , -0.25      , -0.5       ,  0.        ,  0.        ,  0.16666667,
  0.        ,  0.        ,  0.16666667,  0.        ,  0.        ,  0.16666667,
  0.        ,  0.        , -0.16666667,  0.        ,  0.        , -0.16666667,
  0.        ,  0.        , -0.16666667,  0.        ,  0.5       ,  0.66666667,
  0.5       ,  0.5       ,  0.66666667,  0.5       ,  0.5       ,  0.66666667,
  0.5       , -1.        , -1.        , -1.        , -1.        , -1.        , -1.,
 -1.        , -1.        , -1.        ,  0.5       ,  0.66666667,  0.5       ,  0.5,
  0.66666667,  0.5       ,  0.5       ,  0.66666667,  0.5       ,  0.,
 -0.16666667,  0.        ,  0.        , -0.16666667,  0.        ,  0.,
 -0.16666667,  0.        ,  0.        ,  0.16666667,  0.        ,  0.,
  0.16666667,  0.        ,  0.        ,  0.16666667,  0.        , -0.25      , -0.5,
  0.        , -0.25      , -0.5       ,  0.        , -0.25      , -0.5       ,  0.,
  0.5       ,  0.66666667,  0.        ,  0.5       ,  0.66666667,  0.        ,  0.5,
  0.66666667,  0.        , -0.25      , -0.5       ,  0.        , -0.25      , -0.5,
  0.        , -0.25      , -0.5       ,  0.        ,  0.        ,  0.16666667,
  0.        ,  0.        ,  0.16666667,  0.        ,  0.        ,  0.16666667,
  0.        ,  0.        , -0.08333333,  0.        ,  0.        , -0.08333333,
  0.        ,  0.        , -0.08333333,  0.        ,  0.        ,  0.16666667,
  0.        ,  0.        ,  0.16666667,  0.        ,  0.        ,  0.16666667,
  0.        ,  0.        , -0.16666667,  0.        ,  0.        , -0.16666667,
  0.        ,  0.        , -0.16666667,  0.        ,  0.        ,  0.16666667,
  0.        ,  0.        ,  0.16666667,  0.        ,  0.        ,  0.16666667,
  0.        ,  0.        , -0.08333333,  0.        ,  0.        , -0.08333333,
  0.        ,  0.        , -0.08333333,  0.])


kernel = np.array((5,5),np.float32)/25
dst = cv2.filter1D(img,-1,filter3)

def truncate_2(x):
    neg = ((x + 2) + abs(x + 2)) / 2 - 2
    return -(-neg+2 + abs(- neg+2)) / 2 + 2
dst = truncate_2(dst)
#dst = cv2.filter2D(dst,-1,filter2)
#dst = cv2.filter2D(dst,-1,filter3)

cv2.imshow("frame", dst)
cv2.waitKey(0)
"""
plt.subplot(121),plt.imshow(img),plt.title('Original')
plt.xticks([]), plt.yticks([])
plt.subplot(122),plt.imshow(dst),plt.title('Averaging')
plt.xticks([]), plt.yticks([])
plt.show()
"""